namespace = law_events

# Debate event
law_events.1 = { #conscientious objectors
	type = country_event
	placement = root

	title = law_events.1.t
	desc = law_events.1.d
	flavor = law_events.1.f

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_before_the_battle.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/before_the_battle"

	icon = "gfx/interface/icons/event_icons/event_military.dds"

	duration = 3

	cooldown = { months = normal_modifier_time }

	trigger = {
		is_enacting_law = law_type:law_mass_conscription
		NOT = { has_variable = conscientious_objection }
		any_interest_group = {
			is_marginal = no
			law_stance = {
				law = law_type:law_mass_conscription
				value > neutral
			}
		}
		any_interest_group = {
			is_marginal = no
			law_stance = {
				law = law_type:law_mass_conscription
				value < neutral
			}
		}
	}

	immediate = {
		currently_enacting_law = {
    		save_scope_as = current_law_scope
    	}
		set_variable = {
			name = conscientious_objection
			days = 1825 # five years
		}
		random_interest_group = {
			limit = {
				is_marginal = no
				law_stance = {
					law = law_type:law_mass_conscription
					value > neutral
				}
			}
			save_scope_as = pro_conscription_ig
		}
		random_interest_group = {
			limit = {
				is_marginal = no
				law_stance = {
					law = law_type:law_mass_conscription
					value < neutral
				}
			}
			save_scope_as = anti_conscription_ig
		}
	}

	cancellation_trigger = {
		NOT = { currently_enacting_law = scope:current_law_scope }
	}

	option = { # allow objectors to sit out
		name = law_events.1.a
		default_option = yes
		add_enactment_modifier = {
			name = objectors_conscription_law
		}
		scope:pro_conscription_ig = {
			add_modifier = {
				name = modifier_conscientious_objection_denied
				months = normal_modifier_time
			}
		}
		scope:anti_conscription_ig = {
			add_modifier = {
				name = modifier_conscientious_objection_approved
				months = normal_modifier_time
			}
		}
		add_modifier = {
			name = modifier_conscription_rate_lowered
			months = long_modifier_time
		}
	}

	option = {  # everyone must fight
		name = law_events.1.b
		add_enactment_modifier = {
			name = objectors_conscription_bad_law
		}
		scope:pro_conscription_ig = {
			add_modifier = {
				name = modifier_conscientious_objection_rejected_good
				months = normal_modifier_time
			}
		}
		scope:anti_conscription_ig = {
			add_modifier = {
				name = modifier_conscientious_objection_rejected
				months = normal_modifier_time
			}
		}
	}
}
